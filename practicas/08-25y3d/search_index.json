[["index.html", "Presentar Información Geográfica en 2.5D y 3D Sistemas de Información Geográfica 1 Introducción", " Presentar Información Geográfica en 2.5D y 3D Sistemas de Información Geográfica José Samos Jiménez (jsamos@ugr.es) Dpto. de Lenguajes y Sistemas Informáticos Universidad de Granada Curso 2024-2025 Citar y Licencia: https://doi.org/10.6084/m9.figshare.26968219.v1 Vídeo: https://youtu.be/YlwMO7VV6XE 1 Introducción A partir de la información geográfica que hemos obtenido para nuestro municipio, vamos a realizar representaciones en formato 2.5D y 3D usando varios medios. Objetivos Presentar información geográfica mediante 2.5D y 3D. Presentar información vectorial mediante 2.5D. Utilizar el MDT para generar un modelo 3D. Utilizar el MDT para obtener un conjunto de puntos 3D. Representar y aplicar algoritmos sobre un conjunto de puntos 3D. Almacenar un conjunto de puntos 3D en PostGIS. "],["d-con-qgis.html", "2 2.5D con QGIS", " 2 2.5D con QGIS Figura 2.1: Representación de la capa vectorial manzana. QGIS ofrece la posibilidad de presentar información vectorial mediante 2.5D. En particular, representaremos mediante este método la capa vectorial manzana de nuestro municipio. En primer lugar, cargamos la capa en QGIS (figura 2.1). También podemos cargar otras capas, en particular una capa ráster de fondo (puede ser una obtenida de la Web, como OSM). Figura 2.2: Propiedades de la capa manzana. En la ventana de propiedades de la capa manzana, en el apartado Simbología, en el primer campo elegimos la opción de presentación 2.5 D (figura 2.2). En el resto de campos del formulario se han dejado los valores por defecto pero se pueden configurar a medida. En particular, en el campo Altura, permite seleccionar un atributo de la tabla de atributos de la capa en el que se indique la altura de cada uno de los elementos representados1. En este caso, vamos a dejar un valor fijo de 10. Figura 2.3: Capa vectorial manzana en 2.5D. El resultado de aplicar ese estilo en la capa vectorial, junto con un ráster de fondo obtenido de OSM, se muestra en la figura 2.3. Se podría tratar de obtener ese campo a partir de los datos del Catastro.↩︎ "],["d-con-saga-gis.html", "3 3D con Saga GIS", " 3 3D con Saga GIS Figura 3.1: Vista de mapa 3D en QGIS. Hay SIG que ofrecen de forma directa una presentación 3D a partir del MDT. En particular QGIS, pulsando sobre Ver &gt; Nueva vista de mapa 3D (figura 3.1). En el caso de QGIS, ofrece la posibilidad de realizar animaciones. En esta actividad, lugar de usar QGIS, vamos a usar SAGA. Figura 3.2: Incluir una capa en SAGA. Para cargar una capa en SAGA, recorremos el árbol de carpetas en la ventana Data sources y, una vez localizado el archivo MDT a considerar, pulsamos Doble-clic sobre él. La capa se añade a la ventana Manager (figura 3.2). Figura 3.3: Añadir una capa al mapa. A continuación, debemos añadir la capa al lienzo del mapa, para ello, podemos utilizar las operaciones del menú contextual de la capa (figura 3.3). Figura 3.4: Mostrar la vista en 3D. Una vez en el lienzo (puede estar junto a otras capas), para obtener una vista 3D, basta con pulsar sobre el icono Show 3D-View de la barra de herramientas (figura 3.4). Figura 3.5: Definir el espacio y la elevación. En la ventana de configuración que se abre (figura 3.5), hemos de definir la zona de representación (campo Grid system) y la capa que contiene la elevación (campo Elevation). Pulsando sobre los campos, los valores por defecto que aparecen son adecuados. En particular, para la elevación, hemos de seleccionar la capa correspondiente al MDT. Figura 3.6: Vista 3D en SAGA. El resultado obtenido se muestra en la figura 3.6. Pulsando sobre la figura y manteniendo pulsado el botón del ratón, la podemos girar o mover. Girando la rueda del ratón hacia uno u otro lado, nos podemos acercar o alejar. Figura 3.7: Operaciones de SAGA accesibles desde QGIS. SAGA ofrece diversas operaciones de transformación y análisis de datos geográficos que podemos utilizar desde QGIS. En la figura 3.7, se muestran las operaciones de SAGA accesibles desde la Caja de herramientas de Procesos de QGIS. "],["d-con-r.html", "4 3D con R", " 4 3D con R Podemos obtener un modelo 3D en R mediante el paquete rayshader. A continuación se muestra el código necesario para generarlo a partir del MDT almacenado en un archivo y el resultado obtenido. file &lt;- &#39;datos/Lanjaron/p03out/mdt-lanjaron-bbox-jsamos.tif&#39; mdt &lt;- terra::rast(file) rs &lt;- rayshader::raster_to_matrix(mdt) rs |&gt; rayshader::sphere_shade(texture = &quot;desert&quot;) |&gt; rayshader::add_shadow(rayshader::ray_shade(rs, zscale = 3), 0.5) |&gt; rayshader::add_shadow(rayshader::ambient_shade(rs), 0) |&gt; rayshader::plot_3d( rs, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800) ) Figura 4.1: Resultado de 3D con rayshaderdesde R. En la figura 4.1 se muestra el resultado. Adicionalmente se le puede añadir que detecte el agua o incluir nubes a una determinada altitud. "],["d-para-imprimir-con-qgis.html", "5 3D para imprimir con QGIS", " 5 3D para imprimir con QGIS Mediante el complemento DEMto3M podemos generar un modelo 3D para imprimir obtenido a partir del MDT. En primer lugar, debemos instalar el complemento. Una vez cargado el MDT, accedemos al complemento pulsando sobre Ráster &gt; DEMto3D &gt; Impresión 3D de MDE. Figura 5.1: Definición de parámetros de impresión 3D. En la ventana que se abre (figura 5.1), definimos los parámetros de generación. En particular, si no aparece ya seleccionada, seleccionamos el MDT en el campo Capa a imprimir; pulsamos sobre el icono Extensión de capa (el icono central) para definir los valores de los campos del apartado Extensión a imprimir; definimos los valores para Espaciado (a menor espaciado más ocupará el modelo generado) y Escala (cuanto más fina sea la escala, más ocupará el modelo generado), las dimensiones se obtienen automáticamente; también se necesita definir la cota considerada para la base, el campo Cota (m), nos da el valor mínimo, en función de ese valor, se obtiene la altura que tendrá el modelo. Al pulsar sobre el botón Exportar a STL, se lleva a cabo la generación del modelo: genera un archivo con extensión STL (objeto 3D) en la carpeta que indiquemos. Figura 5.2: Resultado en 3D Builder. En Windows 10, los archivos STL tienen asociados la aplicación 3D Builder o bien Visor 3D (depende de la actualización). Pulsando doble-clic sobre el nombre del archivo generado, se abre la aplicación y podemos ver el resultado (figura 5.2). También podemos ver el resultado mediante una aplicación Web disponible en https://3dviewer.net/. Pulsando sobre el icono Open model from your device de la barra de herramientas, podemos subir el archivo generado y verlo en el navegador mediante la aplicación Web. "],["representación-3d-web-con-qgis.html", "6 Representación 3D Web con QGIS", " 6 Representación 3D Web con QGIS Mediante el complemento Qgis2threejs podemos generar una representación 3D para presentarla en nuestra Web. En primer lugar, debemos instalar el complemento. Una vez cargado el MDT, para generar la representación 3D, pulsamos sobre el icono Qgis2threejs de la barra de herramientas. Figura 6.1: Previsualización de las capas. La herramienta ofrece una previsualización de las capas cargadas en el proyecto (figura 6.1). Podemos seleccionar o deseleccionar las capas que queramos incluir en el resultado final. Figura 6.2: Definición de parámetros de generación 3D. Si pulsamos sobre la opción File &gt; Export to Web, aparece la ventana de definición de parámetros de exportación en forma de aplicación Web (como se muestra en la figura 6.2). Para que funcione el resultado, hemos de seleccionar la opción Enable the Viewer to Run Locally. Figura 6.3: Resultado en el navegador. El resultado tal y como se puede ver en el navegador, se muestra en la figura 6.3. Figura 6.4: Resultado en el navegador. En lugar de usar solo el MDT, podemos incluir otras capas como puede ser una ortofotografía o capas vectoriales. Por ejemplo, la figura 6.4 muestra el resultado de la composición realizada con el MDT y el mapa de sombras. "],["geometría-3d-con-r-y-postgis.html", "7 Geometría 3D con R y PostGIS", " 7 Geometría 3D con R y PostGIS A partir del MDT de nuestro municipio, vamos a obtener una muestra de puntos en 3D, a almacenarlos en PostGIS y a representarlos en R. Mediante el fragmento de código siguiente, obtenemos una muestra de puntos en 3D. file &lt;- &#39;datos/Lanjaron/p03out/mdt-lanjaron-bbox-jsamos.tif&#39; mdt &lt;- terra::rast(file) # Extraer puntos y elevaciones del MDT puntos &lt;- as.data.frame(mdt, xy = TRUE, na.rm = TRUE) colnames(puntos) &lt;- c(&quot;x&quot;, &quot;y&quot;, &quot;z&quot;) # Seleccionar una muestra aleatoria muestra &lt;- sample(1:nrow(puntos), size = 1000, replace = FALSE) puntos &lt;- puntos[muestra, ] A continuación, podemos generar una capa a partir de las coordenadas de los puntos, mediante el código siguiente. puntos$geom &lt;- paste0(&quot;POINT Z (&quot;, puntos$x, &quot; &quot;, puntos$y, &quot; &quot;, puntos$z, &quot;)&quot;) puntos$id &lt;- 1:nrow(puntos) puntos &lt;- puntos[, c(&#39;id&#39;, &#39;geom&#39;)] sf_puntos &lt;- sf::st_as_sf(puntos, wkt = &quot;geom&quot;, crs = sf::st_crs(mdt)) Los podemos almacenar directamente en PostGIS, mediante el código siguiente. con &lt;- RPostgres::dbConnect( RPostgres::Postgres(), dbname = &#39;lanjaron_jsamos&#39;, host = &#39;localhost&#39;, port = &#39;5432&#39;, user = &#39;postgres&#39;, password = &#39;postgres&#39; ) sf::st_write(obj = sf_puntos, dsn = con, layer = &quot;p3d_lanjaron_bbox_jsamos&quot;) RPostgres::dbDisconnect(con) También podemos representar los puntos desde R, mediante el código siguiente. xyz &lt;- sf::st_coordinates(sf_puntos) rgl::plot3d(xyz[, &#39;X&#39;], xyz[, &#39;Y&#39;], xyz[, &#39;Z&#39;], col = &quot;blue&quot;, size = 1.5, type = &quot;s&quot;, xlab = &quot;X&quot;, ylab = &quot;Y&quot;, zlab = &quot;Z&quot;) Figura 7.1: Resultado de 3D de muestra de puntos desde R. En la figura 7.1 se muestra el resultado. "],["ejercicios.html", "Ejercicios Datos de trabajo Ejercicios", " Ejercicios Datos de trabajo Para el municipio seleccionado, los datos de partida los hemos obtenido en actividades anteriores. Se indican solo los datos que usaremos en esta actividad. Zona de trabajo: término municipal nombre: compuesto por el nombre del municipio (8 letras, sin espacios), -, y usuario de correo (p.e, lanjaron-jsamos) mínimo rectángulo que contiene al término municipal nombre: nombre anterior pero con -bbox- en lugar de - (p.e, lanjaron-bbox-jsamos) Para cada capa de los apartados siguientes, se indica el primer componente del nombre, el resto del nombre depende de los nombres de las capas de la zona de trabajo. Capas vectoriales CartoCiudad con las capas con datos de manzana recortado por el término municipal nombre: cc-manz- Capas ráster archivos de MDT recortado por el mínimo rectángulo nombre: mdt- Ejercicios Ejercicio 1. 2.5D en QGIS (10%) Representa mediante 2.5D la capa vectorial manzana para tu municipio. Incluye las capas del término municipal y el mínimo rectángulo. Utiliza como fondo una capa ráster adecuada. Para documentar la realización del ejercicio, incluye una captura de pantalla completa donde se muestre el resultado. Ejercicio 2. 3D en R (10%) Genera un modelo 3D mediante R de tu municipio. Para documentar la realización del ejercicio, incluye una captura de pantalla completa donde se muestre el resultado. Ejercicio 3. 3D para imprimir (10%) Genera un modelo 3D para imprimir de tu municipio. Para documentar la realización del ejercicio, incluye una captura de pantalla completa donde se muestre el resultado con alguna herramienta de visualización. Ejercicio 4. Geometría 3D con R y PostGIS (70%) Obtén una muestra de puntos 3D a partir del MDT de tu municipio y represéntala en 3D desde R. Para documentar la realización del ejercicio, incluye una captura de pantalla completa donde se muestre el resultado. Almacena los puntos 3D en PostGIS, en la base de datos utilizada en las prácticas anteriores (p.e, en mi caso lanjaron_jsamos), utilizando el prefijo p3d_ para el nombre de la capa y siguiendo el criterio de nombres que hemos usado para las capas (p.e., en mi caso se llamaría p3d_lanjaron_bbox_jsamos) y muestra mediante una consulta desde PgAdmin los 10 primeros puntos en formato WKT. Para documentar la realización del ejercicio, incluye una captura de pantalla completa donde se muestre la consulta y el resultado. Esta capa deberá estar disponible para actividades posteriores. A partir de los puntos almacenados en PostGIS obtén la Triangulación de Delaunay y muéstrala en QGIS. Para documentar la realización del ejercicio, incluye dos capturas de pantalla completa donde se muestre la definición y el resultado. A partir de los puntos almacenados en PostGIS obtén el Diagrama de Voronoi y muéstralo en QGIS. Para documentar la realización del ejercicio, incluye dos capturas de pantalla completa donde se muestre la definición y el resultado. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
