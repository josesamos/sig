[["index.html", "Obtener y Definir Información Geográfica Sistemas de Información Geográfica 1 Introducción", " Obtener y Definir Información Geográfica Sistemas de Información Geográfica José Samos Jiménez (jsamos@ugr.es) Dpto. de Lenguajes y Sistemas Informáticos Universidad de Granada Curso 2024-2025 https://doi.org/10.6084/m9.figshare.26799943.v2 1 Introducción Cada persona tiene asignado un municipio distinto de Andalucía sobre el que realizar sus prácticas, la asignación se realiza en la plataforma de docencia PRADO. En este capítulo, obtendremos los datos para ese municipio utilizando diversas fuentes de datos, internacionales, a nivel de España y para la comunidad autónoma de Andalucía. En mi caso, el municipio elegido es Lanjarón (Granada). A continuación, se detalla la obtención de datos para este municipio. Para el resto de municipios, los datos se obtendrían de forma similar. Si se desea desarrollar para un municipio de otra comunidad autónoma, habría que buscar las fuentes de datos autonómicas equivalentes a las descritas en este capítulo para Andalucía. Los datos públicos están disponibles en sitios Web a los que tendremos que acceder para descargarlos. En algunos casos, se puede acceder a ellos mediante servicios de descarga (WFS, que podemos usar desde QGIS o R y que estudiaremos más adelante); en otros se han desarrollado paquetes R que permiten acceder y descargar ciertos datos (por ejemplo, raster, rgdal, geodata, entre otros). Generalmente, descargaremos los datos accediendo a portales Web que permiten la descarga manual de los datos. Los datos obtenidos en este tema deberán conservarse y estar disponibles para ser utilizados en las actividades que desarrollaremos en los temas siguientes. Objetivos Conocer diversas fuentes de información geográfica. Utilizar fuentes públicas de información geográfica para obtener los datos de una zona. Determinar qué datos son los que se corresponden a una zona concreta. Descargar los datos que se consideren necesarios. Conocer la importancia de los metadatos. Registrar los metadatos asociados a los datos que se obtengan. Generar información geográfica. Definir una nueva capa vectorial. Georreferenciar una imagen. "],["herramientas.html", "2 Herramientas a Instalar 2.1 QGIS Desktop 2.2 R y RStudio 2.3 PostgreSQL, PostGIS y PgAdmin 2.4 GeoServer", " 2 Herramientas a Instalar Las herramientas se incluyen en el orden en que las usaremos en la asignatura. Adicionalmente usaremos otras herramientas pero serán opcionales o bien no requerirán una instalación específica. 2.1 QGIS Desktop QGIS (Quantum GIS) es una herramienta SIG de escritorio de código abierto que permite visualizar, gestionar, editar, analizar datos y diseñar mapas imprimibles. Es utilizado para trabajar con datos geoespaciales y ofrece una amplia gama de funcionalidades para profesionales que trabajan con este tipo de datos. Web: qgis.org 2.2 R y RStudio R es un lenguaje de programación y un entorno de software libre utilizado principalmente para el análisis estadístico, la visualización de datos y la computación científica. Proporciona una amplia variedad de técnicas estadísticas y gráficos. Web: https://www.r-project.org/ RStudio es un entorno de desarrollo integrado (IDE) para R. Ofrece una interfaz amigable que incluye un editor de código avanzado, herramientas de depuración y capacidad de integración con otras aplicaciones y herramientas. Web: https://www.rstudio.com/ 2.3 PostgreSQL, PostGIS y PgAdmin PostgreSQL es un SGBD relacional y objeto-relacional de código abierto, conocido por su robustez, extensibilidad y conformidad con estándares SQL. Web: postgresql.org PostGIS es una extensión para PostgreSQL que añade soporte para datos geoespaciales, permitiendo realizar operaciones y consultas espaciales en la BD. Web: postgis.net PgAdmin es una herramienta de administración y desarrollo para PostgreSQL, proporcionando una interfaz gráfica para gestionar BD PostgreSQL. Web: pgadmin.org 2.4 GeoServer GeoServer es una plataforma de servidor de código abierto para compartir, procesar y editar datos geoespaciales. Permite a los usuarios crear mapas y datos en diversos formatos abiertos estándar. Web: https://geoserver.org. "],["capas-temáticas.html", "3 Capas temáticas 3.1 DERA 3.2 IDEAndalucía 3.3 OpenStreetMap", " 3 Capas temáticas Para obtener capas temáticas de Andalucía1 son fuentes adecuadas: DERA2 (Datos Espaciales de Referencia de Andalucía). IDEAndalucía3 (Infraestructura de Datos Espaciales de Andalucía). Ambas dependen de IECA4 (Instituto de Estadística y Cartografía de Andalucía). También se pueden obtener capas temáticas de España en OpenStreetMap5. 3.1 DERA Figura 3.1: DERA en https://www.juntadeandalucia.es/institutodeestadisticaycartografia/DERA/. En la figura 3.1, se muestra la pantalla principal de DERA. Para acceder a la página de descarga, pulsamos sobre el enlace asociado al texto Descarga de información, que se muestra bajo el mapa. Figura 3.2: DERA en https://www.juntadeandalucia.es/institutodeestadisticaycartografia/DERA/datos_espaciales.htm. DERA permite descargar conjuntamente todas las capas disponibles sobre cada uno de los temas en los que las clasifica. En la figura 3.2, se muestra la lista de temas que presenta. Si seleccionamos un tema, en una nueva página detalla las capas que ofrece e incluye un enlace para descargarlas. Figura 3.3: Datos sobre límites administrativos en DERA. En la figura 3.3, se muestra parte de la página para el tema “13. Límites administrativos”: ofrece enlaces que permiten descargar todas las capas disponibles en un solo archivo. Parte de los metadatos están disponibles en la descripción del contenido: se indica el origen y la última fecha de actualización. Las capas están en formato shapefile y GeoPackage. Una de las capas incluidas en la página de la figura 3.3 es 13_01_TerminoMunicipal que incluye los términos municipales de Andalucía. 3.2 IDEAndalucía Figura 3.4: IDEAndalucía en https://www.ideandalucia.es/portal/. En la figura 3.4, se muestra la pantalla principal de IDEAndalucía. Para acceder a la pantalla de descargas, pulsamos sobre la opción Descargas, en la parte inferior, y, en la pantalla que aparece pulsamos sobre el enlace Acceso al servicio de descargas6 para llegar a la pantalla de la figura 3.5. También podemos acceder directamente a este servicio en http://www.ideandalucia.es/clientedescarga/. Figura 3.5: Cliente de descargas de IDEAndalucía en http://www.ideandalucia.es/clientedescarga/. La pantalla del “Cliente de descargas” (figura 3.5) tiene varios apartados. Para seleccionar la zona geográfica de los datos que vamos a obtener, en el apartado A, podemos seleccionar un lugar en el mapa; alternativamente, en el apartado B, podemos definir la coordenadas de un rectángulo o pulsar sobre Extensión completa para obtener los datos de toda Andalucía. Recomiendo esta opción (pulsar sobre Extensión completa) porque es más rápida y después se pueden seleccionar los datos que se necesiten mediante QGIS o R. En el apartado C, podemos seleccionar una capa y el formato de descarga. Recomiendo seleccionar el formato SHP ya que, en las pruebas que he hecho, en el resto de formatos he encontrado diversos problemas. Figura 3.6: Solicitud de descarga de IDEAndalucía. Una vez seleccionada una capa (en la figura 3.6, se ha seleccionado la capa “Términos municipales”) pulsamos sobre el botón Descargar, situado a la derecha del nombre de la capa y del formato de descarga. El resultado es que la capa se añade al apartado D, “Descargas solicitadas”. Pulsando sobre el nombre de la capa en ese apartado, accedemos a la pantalla de descarga. Figura 3.7: Descarga de IDEAndalucía disponible. En la figura 3.7, se muestra la pantalla de descarga de una capa, una vez está preparada. Según la carga de trabajo del servidor, puede tardar más o menos en estar disponible para descarga. En el caso del formato elegido, se descarga un archivo ZIP con todos los componentes del shapefile. El nombre de la capa no aparece en los nombres de los archivos descargados: recomiendo renombrar el archivo ZIP con un nombre basado en el nombre de la capa. Si se trabaja con QGIS, no es necesario extraer los datos del archivo ZIP, se puede acceder directamente a las capas e incorporarlas al proyecto. En R se pueden extraer los archivos de un ZIP mediante una función. 3.3 OpenStreetMap Figura 3.8: Capas temáticas de OpenStreetMap para España en https://download.geofabrik.de/europe/spain.html. Hasta hace poco podíamos obtener un conjunto de capas temáticas para España en un solo archivo desde la pantalla de la figura 3.8, bastaba con pulsar sobre el enlace spain-latest-free.shp.zip, este enlace ya no está disponible y hay enlaces para cada una de las comunidades y ciudades autónomas en el apartado Sub Regions. Podemos obtenerlas en varios formatos, entre ellos en formato shapefile7. , En nuestro caso nos interesa descargar andalucia-latest-free.shp.zip Esa misma página, incluye un documento en formato PDF donde se describen las capas y su contenido (https://download.geofabrik.de/osm-data-in-gis-formats-free.pdf). Para otras comunidades autónomas se pueden obtener de IDE de España en https://www.idee.es/web/idee/idee#proyectosidee.↩︎ https://www.juntadeandalucia.es/institutodeestadisticaycartografia/DERA/↩︎ http://www.ideandalucia.es/portal/web/ideandalucia/↩︎ http://www.juntadeandalucia.es/institutodeestadisticaycartografia/↩︎ www.openstreetmap.org↩︎ 2023-09-21: Lo están actualizando y no aparece el enlace. Accedemos directamente como se indica a continuación: http://www.ideandalucia.es/clientedescarga/.↩︎ También están disponibles en formato PBF, formato definido por la comunidad de OpenStreetMap.↩︎ "],["obtener-la-zona-de-trabajo.html", "4 Obtener la zona de trabajo 4.1 Término municipal y mínimo rectángulo que lo contiene 4.2 Hojas del Mapa Topográfico Nacional 4.3 Hojas del Mapa Topográfico de Andalucía 4.4 Operaciones en QGIS", " 4 Obtener la zona de trabajo A partir de la capa sobre términos municipales, vamos a obtener el polígono del término municipal de nuestro municipio. Posteriormente filtraremos los datos obtenidos para focalizarnos exclusivamente en los datos de nuestro municipio. Para determinadas operaciones es interesante realizarlas sobre el rectángulo que contiene la zona de interés, por este motivo obtendremos el mínimo rectángulo que contenga al polígono del término municipal. Los mapas se dividen en hojas cartográficas donde se representan los datos de las zonas que les corresponden; el número de hoja cartográfica de una zona depende de la representación que se use en el mapa. En algunos sitios web se pueden seleccionar los datos por el número de hoja cartográfica. Por este motivo, obtendremos los números de hoja según varias representaciones que contengan al rectángulo de nuestro municipio. Las operaciones siguientes se pueden hacer tanto en QGIS como en R. A continuación, se muestra cómo realizarlas en R. En el apartado 4.4, se indica cómo realizarlas en QGIS8. 4.1 Término municipal y mínimo rectángulo que lo contiene Para obtener el término municipal, leemos los municipios de la capa que hemos obtenido previamente. Tenemos que comprobar que las palabras con tilde se vean correctamente. Por defecto, la función st_read() lee los datos en UTF-8. Si no se leen correctamente deberemos cambiar la codificación, generalmente a WINDOWS-1252, es lo que ocurre para los datos obtenidos de IDEAndalucía. library(sf) municipios &lt;- st_read(&quot;datos/Lanjaron/dera/13_01_TerminoMunicipal.shp&quot;) O bien: library(sf) municipios &lt;- st_read( &quot;datos/Lanjaron/ideandalucia/Terminos municipales/shp7096744757282666625.shp&quot;, options = &quot;ENCODING=WINDOWS-1252&quot; ) Una vez leídos los datos de los municipios, seleccionamos el nuestro y, mediante la combinación de las funciones st_bbox() y st_as_sfc(), obtenemos el mínimo rectángulo que lo contiene. Podemos comprobar el resultado mediante la función plot(). lanjaron &lt;- municipios[municipios$municipio == &quot;Lanjarón&quot;, ] lanjaron_bbox &lt;- st_as_sfc(st_bbox(lanjaron, crs = st_crs(lanjaron))) plot(lanjaron_bbox) plot(st_geometry(lanjaron), add = TRUE) Figura 4.1: Municipio de Lanjarón y mínimo rectángulo que lo contiene. En la figura 4.1, se muestra el resultado para el municipio de Lanjarón. Vamos a guardar las capas obtenidas en un GeoPackage, que puede contener varias capas. Según el CRS de la capa con la que estemos trabajando, le damos un nombre u otro a las capas. Para EPSG 25830: st_write(obj = lanjaron, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-jsamos-25830&quot;) st_write(obj = lanjaron_bbox, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-bbox-jsamos-25830&quot;) Para EPSG 23030: st_write(obj = lanjaron, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-jsamos-23030&quot;) st_write(obj = lanjaron_bbox, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-bbox-jsamos-23030&quot;) 4.2 Hojas del Mapa Topográfico Nacional Vamos a obtener un shapefile con las hojas del MTN (Mapa Topográfico Nacional), disponible en el IGN (Instituto Geográfico Nacional). A partir de él, obtendremos la intersección entre las hojas y el rectángulo del municipio. Aunque nos interesa obtener exclusivamente el número de las hojas, obtendremos una capa vectorial con el resultado de la operación de intersección. Cuando en una web podamos realizar consultas según el número de hoja del MTN, usaremos los números asociados a nuestro municipio consultando la capa obtenida. Figura 4.2: Centro de Descargas del CNIG https://centrodedescargas.cnig.es/CentroDescargas. En la figura 4.2 se muestra la pantalla del Centro de Descargas del CNIG (Centro Nacional de Información Geográfica). Pulsando sobre el enlace Información Geográfica de Referencia, accedemos a distintos conjuntos de datos de referencia. Uno de ellos es el titulado “Cuadrículas cartográficas MTN25 y MTN50” (figura 4.3). Figura 4.3: Cuadrículas cartográficas MTN25 y MTN50. Pulsando sobre Descargar (figura 4.3), obtenemos un archivo ZIP que contiene varias capas en formato Shapefile con las cuadrículas MTN de referencia a escala \\(1:25000\\) y \\(1:50000\\). El procedimiento en ambos casos es el mismo: leer el shapefile de la cuadrícula con la codificación adecuada; transformar la capa mediante la función st_transform() para que tenga el mismo CRS que la capa del rectángulo; recortar la capa mediante la capa del rectángulo, mediante la función st_crop(). El número de las hojas se puede consultar en las variables MTN25_CLAS y MTN50_CLAS, respectivamente. cuadricula25 &lt;- st_read(&quot;datos/Lanjaron/cnig/cuadriculas/MTN25_ED50_Peninsula_Baleares.shp&quot;, options = &quot;ENCODING=WINDOWS-1252&quot;) cuadricula25 &lt;- st_transform(cuadricula25, crs = st_crs(lanjaron_bbox)) lanjaron_cuadricula25 &lt;- st_crop(cuadricula25, lanjaron_bbox) lanjaron_cuadricula25$MTN25_CLAS cuadricula50 &lt;- st_read(&quot;datos/Lanjaron/cnig/cuadriculas/MTN50_ED50_Peninsula_Baleares.shp&quot;, options = &quot;ENCODING=WINDOWS-1252&quot;) cuadricula50 &lt;- st_transform(cuadricula50, crs = st_crs(lanjaron_bbox)) lanjaron_cuadricula50 &lt;- st_crop(cuadricula50, lanjaron_bbox) lanjaron_cuadricula50$MTN50_CLAS Para tener disponible esta información, guardamos las capas en el archivo GeoPackage donde hemos guardado las capas del término municipal y el rectángulo que lo contiene. st_write(obj = lanjaron_cuadricula25, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-cuadricula-25&quot;) st_write(obj = lanjaron_cuadricula50, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-cuadricula-50&quot;) 4.3 Hojas del Mapa Topográfico de Andalucía Las hojas del Mapa Topográfico de Andalucía están disponibles en el cliente de descargas de IDEAndalucía. Figura 4.4: Hojas del Mapa Topográfico de Andalucía en el cliente de descargas de IDEAndalucía en http://www.ideandalucia.es/clientedescarga/. Seleccionamos las capas de las cuadrículas de distribución de las hojas (figura 4.4) y las descargamos. A partir de ahí, el procedimiento a seguir es el mismo descrito en el apartado 4.2 para el MTN, a continuación se incluye el código. cuadricula10 &lt;- st_read( &quot;datos/Lanjaron/ideandalucia/Cuadricula de Distribucion de Hojas 1 10.000/shp1570285905552008566.shp&quot;, options = &quot;ENCODING=WINDOWS-1252&quot; ) cuadricula10 &lt;- st_transform(cuadricula10, crs = st_crs(lanjaron_bbox)) lanjaron_cuadricula10 &lt;- st_crop(cuadricula10, lanjaron_bbox) lanjaron_cuadricula10$numero cuadricula100 &lt;- st_read( &quot;datos/Lanjaron/ideandalucia/Cuadricula de Distribucion de Hojas 1 100.000/shp5361996918606098348.shp&quot;, options = &quot;ENCODING=WINDOWS-1252&quot; ) cuadricula100 &lt;- st_transform(cuadricula100, crs = st_crs(lanjaron_bbox)) lanjaron_cuadricula100 &lt;- st_crop(cuadricula100, lanjaron_bbox) lanjaron_cuadricula100$numero st_write(obj = lanjaron_cuadricula10, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-cuadricula-10&quot;) st_write(obj = lanjaron_cuadricula100, dsn = &quot;datos/Lanjaron/lanjaron-jsamos.gpkg&quot;, layer = &quot;lanjaron-cuadricula-100&quot;) 4.4 Operaciones en QGIS Si se desea realizar en QGIS las operaciones descritas en los apartados anteriores para R, en el tema sobre QGIS, se ha mostrado cómo leer una capa, seleccionar un elemento (el municipio elegido) y guardar una capa con el formato que se desee. Para obtener el mínimo rectángulo que envuelve al término municipal, se puede utilizar la operación Vector &gt; Research Tools &gt; Extraer extensión de la capa… Para recortar las capas mediante la capa del rectángulo, se puede utilizar la operación Vector &gt; Geoprocessing Tools &gt; Intersección… Con QGIS, el resultado ha de ser el mismo que el obtenido con R. Solo hay que realizarlas una vez: con QGIS o con R.↩︎ "],["ortofotografía-mdt-e-información-geográfica-temática.html", "5 Ortofotografía, MDT e información geográfica temática 5.1 Centro de Descargas del CNIG 5.2 Line@", " 5 Ortofotografía, MDT e información geográfica temática Podemos obtener ortofotografías y MDT (Modelo Digital del Terreno) desde: Centro de Descargas del CNIG9. Line@10 (Localizador de Información Espacial de Andalucía) del IECA. Una de las diferencias entre estas fuentes de datos es la escala de las hojas de acceso, otra su resolución. Esto hace que el tamaño de los archivos obtenidos de CNIG sea generalmente mayor que el de los obtenidos de Line@, especialmente para las ortofotos. Por ejemplo, para Lanjarón, los archivos de las ortofotos de CNIG ocupan 11.7 GB, los archivos de Line@ ocupan 0.99 GB. Por este motivo, para los ejercicios de otros capítulos, si tenemos limitaciones de espacio o capacidad de proceso, recomiendo utilizar Line@ como fuente para ortofotos. Para el MDT la diferencia de tamaños no es tan relevante y CNIG ofrece más posibilidades en cuanto a resolución, cualquiera de las dos fuentes es adecuada. Respecto a la información geográfica temática, a continuación se describe cómo obtener: CartoCiudad y CORINE Land Cover desde el Centro de Descargas del CNIG; plano callejero en formato PDF desde Line@. 5.1 Centro de Descargas del CNIG En la figura 4.2 se muestra la pantalla del Centro de Descargas del CNIG. Pulsando sobre el enlace: Fotos e imágenes aéreas, accedemos a una página donde hay un conjunto de datos de ortofotografías. Modelos Digitales de Elevaciones, accedemos a los conjuntos de datos que incluyen MDT. Información geográfica temática, podemos obtener las capas de CartoCiudad y CORINE Land Cover. 5.1.1 Ortofotografía Figura 5.1: Ortofoto PNOA Máxima Actualidad. Uno de los apartados de Fotos e imágenes aéreas es Ortofoto PNOA Máxima Actualidad, que se muestra en la figura 5.1. Podemos acceder a los productos de varias formas. Si tenemos los números de las hojas, una manera fácil de acceder es mediante la búsqueda por listado, pulsando sobre el icono Por listado. Figura 5.2: Búsqueda por listado. Pulsando sobre la pestaña Hoja MTN50 (figura 5.2), podemos ir introduciendo los números de las hojas de nuestro municipio y, pulsando sobre el botón Buscar, se muestran los archivos que podemos ir añadiendo a la cesta de descargas o bien descargar directamente (figura 5.3). Figura 5.3: Archivos de una hoja. Además del archivo de la ortofoto de la página, hay disponibles otros archivos con metadatos que podemos utilizar para completar la información sobre la ortofoto (figura 5.3). Para buscar los archivos de otra página, pulsamos sobre la opción Búsqueda por listado, en la segunda línea del menú de la cabecera de la página (figura 5.2). 5.1.2 MDT En el apartado “Modelos Digitales de Elevaciones” hay varias posibilidades para obtener MDT con distintas resoluciones. Figura 5.4: MDT a varias resoluciones. En la figura 5.4, se muestran las opciones disponibles para el MDT. El tamaño de los archivos va a depender de la opción elegida. En este caso son mucho más pequeños que los de las ortofotos. Seleccionaremos alguna cuyo nivel de descarga sea “hojas del MTN”. Pulsando sobre el enlace Por listado de la opción elegida, descargamos el MDT tal y como hemos descargado las ortofotos: introduciendo los números de hoja MTN de nuestro municipio. 5.1.3 CartoCiudad, CORINE Land Cover Figura 5.5: Información geográfica temática. Pulsando sobre Información geográfica temática (figura 4.2), accedemos al apartado “Información geográfica temática” (figura 5.5) desde donde podemos obtener las capas de CartoCiudad y CORINE Land Cover. Para CartoCiudad, si accedemos Por listado, introduciendo cualquiera de los números de hoja de nuestro municipio, obtendremos el archivo de nuestra provincia, ya que el acceso es por provincia. Para CORINE Land Cover, accediendo también Por listado, introduciendo cualquiera de los números de hoja de nuestro municipio, obtendremos los archivo para toda España, para varios años y formatos. 5.2 Line@ En la zona superior derecha de la pantalla de Line@ se presentan los productos disponibles, que podemos desplegar: Ortofotos digitales de Andalucía para la ortofoto, Modelos digitales de Andalucía para obtener el MDT, Planos Callejeros de Andalucía para obtener el plano del municipio en formato PDF. 5.2.1 Ortofotografía En particular, si desplegamos el apartado “Ortofotos digitales de Andalucía”, podemos observar que hay disponibles ortofotos de varias fechas. Seleccionamos la más actual. Al seleccionar un producto, se representan en el mapa las hojas en las que se estructuran los archivos. Si nos aproximamos suficientemente a la zona de nuestro municipio (girando la rueda del ratón o mediante la barra vertical situada en la zona superior izquierda de la pantalla), podemos ver el número de cada hoja. Pulsando sobre cada una, podemos seleccionarla: seleccionamos el archivo del producto que hemos elegido, que se muestra en la zona inferior derecha de la pantalla. Figura 5.6: Line@ en https://www.juntadeandalucia.es/institutodeestadisticaycartografia/lineav2/web/. En la figura 5.6, se muestran varias hojas seleccionadas, las de los números obtenidos para Lanjarón en el mapa de escala \\(1:10000\\) (102643, 102644, 102713, etc.). Se puede observar que el formato de los números es diferente (1026-4-3, 1026-4-4, 1027-1-3, etc.), pero es perfectamente reconocible. Una vez seleccionadas todas las hojas de nuestro municipio, pulsamos sobre el botón Añadir a la cesta (situado en la parte inferior derecha de la pantalla) y, en esa misma zona, aparece un nuevo botón Descargar para descargar los archivos seleccionados. Después de rellenar un formulario, nos permite generar y descargar todos los archivos comprimidos en un ZIP. 5.2.2 MDT Para obtener MDT, desplegamos el apartado “Modelos digitales de Andalucía”, de la zona superior derecha de la pantalla, y procedemos de la misma forma que se ha descrito para obtener la ortofotografía. 5.2.3 Plano callejero Figura 5.7: Selección del plano callejero de un municipio. Para obtener un plano callejero del municipio, desplegamos el apartado “Planos Callejeros de Andalucía”, seleccionamos la opción “Cabeceras Municipales 1:2.000” y pulsamos sobre el mapa del núcleo principal del nuestro municipio (en caso de haber varios), tal y como se muestra en la figura 5.7 para Lanjarón. A partir de ahí, procedemos como con la ortofoto o el MDT para descargar el archivo. https://centrodedescargas.cnig.es/CentroDescargas↩︎ https://www.juntadeandalucia.es/institutodeestadisticaycartografia/lineav2/web/↩︎ "],["bandas-de-satélite.html", "6 Bandas de Satélite 6.1 ESA 6.2 USGS", " 6 Bandas de Satélite Como fuentes para bandas de satélite vamos a considerar las webs: Copernicus Open Access Hub de ESA (European Space Agency) para obtener datos de Sentinel-2 y GloVis de USGS (U.S. Geological Survey) para obtener los datos de Landsat 8. 6.1 ESA La ESA, en su web Copernicus Open Access Hub11, ofrece los datos de los satélites Sentinel. Para acceder a los datos y poder descargarlos, lo primero que tenemos que hacer es registrarnos e identificarnos. Figura 6.1: Copernicus Open Access Hub de ESA en https://scihub.copernicus.eu/dhus/. Al acceder, mediante el ratón, pulsando-arrastrando-soltando para movernos y girando la rueda para acercarnos o alejarnos, nos situamos en la zona de nuestro municipio en el mapa que presenta. En la parte superior del lateral derecho de la ventana, tiene dos botones unidos, etiquetados como Switch to Navegation Mode, y, cuando lo pulsamos se transforma en Switch to Area Mode (figura 6.1). En el primer modo, nos permite movernos, como hemos hecho; en el segundo modo, podemos seleccionar una zona mediante la definición de un polígono. Lo más sencillo es definir un rectángulo pulsando-arrastrando-soltando una zona que incluya a nuestro municipio. Figura 6.2: Selección de la zona de nuestro municipio. El resultado de seleccionar la zona de nuestro municipio se muestra en la figura 6.2. No tiene que ser una selección exacta pero sí interesa que sea aproximada para determinar qué productos necesitamos para cubrir el área de trabajo. Con esta selección determinamos la zona de interés para buscar productos. Figura 6.3: Definición de condiciones de búsqueda de productos. Una vez seleccionada la zona, pulsamos sobre el icono formado por tres barras horizontales, en la zona superior izquierda de la pantalla, en la barra de búsqueda, a la izquierda del carro de la compra. Se abre un formulario donde podemos acabar de definir las condiciones de búsqueda (figura 6.3). En concreto, definimos: en el campo Sensing period, un periodo de obtención de los datos reciente, marcamos la casilla de selección para Mission: Sentinel-212, en el campo Satellite Platform 13 seleccionamos el valor “S2A_*“, en el campo Product Type14 seleccionamos el valor “S2MSI2A” También se pueden definir condiciones sobre la cobertura de nubes y el número de órbita: se pueden consultar los números de órbita descargándose una capa15 que se puede consultar en Google Earth pero, en este caso, no es necesario porque ya hemos determinado la zona. Figura 6.4: Productos de Sentinel-2 resultado de la búsqueda. A continuación, pulsamos sobre el icono en forma de lupa, a la derecha de la misma barra de la zona superior izquierda, para que lleve a cabo la búsqueda. El resultado se muestra en la figura 6.4: en la misma ventana de búsqueda, aparece una lista de resultados. Pulsando sobre cada uno de ellos se marca en el mapa la zona a la que corresponde. Para cada resultado se muestra la fecha de obtención y podemos consultar sus características. En este caso, como se puede ver en la figura 6.4, necesitamos dos bloques de datos para cubrir el área del municipio. Seleccionamos los de fecha más reciente. Se puede descargar directamente o bien los añadimos al carro de la compra para descargarlos después. La estructura de carpetas de los datos que obtenemos se describe en el documento “Level-2A Product Formatting”16. Las bandas (archivos de extensión jp2) están clasificadas según su resolución espacial en carpetas que la indican (R10m, R20m y R60m), dentro de la carpeta IMG_DATA en la carpeta GRANULE. 6.2 USGS Podemos descargar directamente datos de Landsat desde GloVis17 (USGS Global Visualization Viewer). Lo primero que tenemos que hacer es registrarnos e identificarnos para poder acceder con todas las funcionalidades. Figura 6.5: Selección de datos en GloVis en https://glovis.usgs.gov/app?fullscreen=0. En la pantalla de navegación, pulsando-arrastrando-soltando para movernos y girando la rueda del ratón para acercarnos o alejarnos, nos situamos en la zona de nuestro municipio. En la columna de la izquierda de la ventana, titulada “Choose Your Data Set(s)” (figura 6.5), seleccionamos el conjunto de datos, en este caso el de Landsat 8 (pulsando sobre el control Landsat 8 OLI/TIRS C1 Level-1). Podemos definir más condiciones en la parte inferior de esa ventana, por ejemplo, podemos definir un rango de fechas o un mes concreto. Para que tengan efecto estas condiciones adicionales, tenemos que pulsar el botón APPLY, situado en la parte inferior derecha de esa ventana. A continuación de la línea del control Landsat 8 OLI/TIRS C1 Level-1 que hemos seleccionado, nos indica el número de conjuntos de datos que ha encontrado. Podemos movernos y ver los datos seleccionando el año en la línea de tiempo de la parte inferior central de la ventana y pulsando sobre los botones Next y Previous de la parte inferior derecha. En la parte inferior central de la ventana se muestra la fecha de los datos. Cuando veamos un conjunto de datos que nos interese (es de nuestra zona, de fecha actual, no tiene muchas nubes), lo seleccionamos acercándonos a él (girando la rueda del ratón) y pulsando sobre el botón Select (en la parte inferior derecha). Una vez seleccionado, podemos descargarlo pulsando sobre el botón Download de la misma zona. Adicionalmente, podemos consultar los metadatos pulsando sobre el botón View Metadata. Figura 6.6: Archivos disponibles para descargar. En la figura 6.6, se muestra la ventana de descarga de datos para la selección realizada. Además del archivo con las capas (en formato GeoTIFF), hay archivos con medatadatos. Descargamos cada uno de ellos pulsando sobre los botones asociados. https://scihub.copernicus.eu/dhus/↩︎ https://earth.esa.int/web/sentinel/user-guides/sentinel-2-msi/overview↩︎ https://earth.esa.int/web/sentinel/technical-guides/sentinel-2-msi/msi-instrument↩︎ https://earth.esa.int/web/sentinel/user-guides/sentinel-2-msi/product-types↩︎ De https://sentinel.esa.int/web/sentinel/missions/sentinel-2/satellite-description/orbit↩︎ https://earth.esa.int/web/sentinel/technical-guides/sentinel-2-msi/level-2a/product-formatting↩︎ https://glovis.usgs.gov/app?fullscreen=0↩︎ "],["definir-información-geográfica.html", "7 Definir información geográfica 7.1 Crear datos vectoriales 7.2 Georreferenciar una imagen", " 7 Definir información geográfica En este apartado se muestra cómo definir información geográfica. En particular, cómo crear un capa de datos vectoriales y cómo georreferenciar una imagen. 7.1 Crear datos vectoriales Podemos crear datos vectoriales con QGIS. Vamos a obtener una imagen de la Web de nuestro municipio y, a partir de ella, definiremos una capa vectorial. Figura 7.1: Archivos disponibles para descargar. Una manera de obtener en QGIS una imagen de la Web de nuestro municipio es cargar alguna de las capas obtenidas en el apartado 4.1 (el término municipal o el rectángulo que lo contiene) y usar el complemento QuickMapServices, tal y como se describe en el tema sobre QGIS. El resultado para Lanjarón se muestra en la figura 7.1. Figura 7.2: Archivos disponibles para descargar. Para crear una nueva capa vectorial, pulsamos sobre Capa &gt; Crear capa y, a continuación, la opción del formato de la capa que queramos crear (figura 7.2). En la ventana que se abre, seleccionamos el archivo donde guardarla, el nombre de la capa, el tipo de geometría y el CRS, también podemos definir los campos (nombre y tipo) que contendrá la tabla de atributos. Al pulsar sobre el botón Aceptar tenemos una capa vacía creada. Para crear elementos en la capa, pulsamos sobre la opción Capa &gt; Conmutar edición y, en la barra de herramientas se activa un botón para añadir elementos a la capa (puntos, líneas o polígonos, según la geometría que hayamos elegido al crearla). Una vez pulsamos sobre el botón para añadir un elemento, podemos definirlo pulsando sobre la imagen. Si está compuesto de varios puntos, para acabar de definir un elemento, hay que pulsar sobre el botón derecho del ratón. A continuación, se abre una ventana para definir los atributos asociados al elemento que hayamos incluido en la tabla de atributos. Para acabar de definir la capa, pulsamos de nuevo sobre Capa &gt; Conmutar edición y aceptamos los cambios. 7.2 Georreferenciar una imagen Figura 7.3: Imagen para georreferenciar. Como punto de partida, vamos a tomar una imagen de parte del plano de nuestro municipio obtenido en el apartado 5.2.3. En mi caso, la imagen que he considerado es la de la figura 7.3, que he salvado como un archivo en formato JPG. Figura 7.4: Acceso a la herramienta de georreferenciación. Para georreferenciar una imagen también usaremos QGIS. En primer lugar, cargamos una imagen de nuestro municipio obtenida de la Web, como se describe en el apartado 7.1, para tenerla como referencia. La georreferenciación la haremos mediante la herramienta accesible desde la opción Ráster &gt; Georreferenciador…18 (figura 7.4). Al pulsar sobre esa opción, iniciamos la herramienta de georreferenciación. Figura 7.5: Herramienta de georreferenciación. En primer lugar, debemos cargar el ráster a georreferenciar en la herramienta de georreferenciación. Esta operación se realiza pulsando sobre la opción Archivo &gt; Open Ráster… o sobre el icono de esar operación ubicado en la barra de herramientas, y seleccionando el archivo con la imagen. Como resultado se carga el ráster en la herramienta (figura 7.5). Figura 7.6: Definición de coordenadas de un punto de referencia. Ahora debemos establecer una relación entre la imagen que acabamos de cargar y la superficie terrestre. Pulsamos sobre Editar &gt; Añadir punto (o sobre el icono de esa operación de la barra de herramientas). Para mostrar que estamos definiendo un punto, cambia la forma de cursor. Pulsamos sobre algún punto significativo de la imagen que queremos georreferenciar y se abre una ventana para definir las coordenadas del punto seleccionado (figura 7.6). Si conocemos las coordenadas podemos introducirlas manualmente; pulsando sobre el botón Desde el lienzo del mapa, podemos obtenerlas marcando sobre la imagen que hemos obtenido de la Web, que ya está georreferenciada, pulsando sobre el punto correspondiente. Figura 7.7: Coordenadas de un punto de referencia definidas. El resultado obtenido después de pulsar sobre la imagen de la Web, se muestra en la figura 7.7. Se obtienen las coordenadas y el CRS en el que se definen. Figura 7.8: Puntos de referencia definidos. Hay que repetir esta operación para varios puntos dispersos en la imagen. Los puntos definidos se muestran en la herramienta de georreferenciación (figura 7.8). Figura 7.9: Configuración de la transformación. Una vez definidos suficientes puntos (por lo menos 4, pero mejor 6 o más), pulsamos sobre Archivo &gt; Comenzar georreferenciado o sobre el icono equivalente de la barra de herramientas (figura 7.8), se abre la ventana que permite definir el método para realizar la operación y configurar el resultado (figura 7.9). Figura 7.10: Resultado de la transformación. El resultado obtenido para el ejemplo se muestra en la figura 7.10: ha situado la imagen correctamente en la zona donde corresponde, transformando el resto de puntos. En la versión de QGIS con la que estoy trabajando esa opción está directamente disponible. En versiones previas, había que activar el complemento Georreferenciador GDAL para que apareciera.↩︎ "],["ejercicios.html", "Ejercicios", " Ejercicios Ejercicio 1. Capas y metadatos Para las capas obtenidas en este capítulo que se indiquen obtén, al menos, los datos siguientes y presenta conjuntamente los de todas las capas (p.e., en formato de fichas o de tabla): número del ejercicio en el que se ha obtenido, nombre del archivo, formato del archivo, tamaño del archivo, descripción, tipo de capa (ráster: número de bandas, resolución espacial / vectorial: puntos, líneas o polígonos), CRS, Web/organismo de origen, fecha de descarga, fecha de los datos (si se conoce), datos adicionales (p.e., origen de los datos). Ejercicio 2. Capas vectoriales A partir de cualquier fuente (pueden ser varias), obtén capas vectoriales sobre los temas siguientes: términos municipales, una capa compuesta por líneas sobre vías de comunicación (p.e., carreteras, caminos, calles, etc.) que tenga datos para tu municipio, una capa compuesta por líneas sobre red hidrográfica (p.e., ríos, acequias, canalizaciones, etc.) que tenga datos para tu municipio, Este ejercicio se documenta con la realización del ejercicio 1. Ejercicio 3. GeoPackage Para el municipio seleccionado, obtén un GeoPackage con las capas y características siguientes: el nombre del GeoPackage ha de estar compuesto por el nombre del municipio y tu usuario de correo de la UGR (p.e., en mi caso lanjaron-jsamos). contiene una capa vectorial con el término municipal del municipio cuyo nombre está compuesto por el nombre del municipio, tu usuario de correo de la UGR y el código EPSG de la capa (p.e., en mi caso lanjaron-jsamos-25830 o lanjaron-jsamos-23030), contiene una capa vectorial con el mínimo rectángulo que contiene al término municipal del municipio cuyo nombre está compuesto por el nombre del municipio, “bbox”, tu usuario de correo de la UGR y el código EPSG de la capa (p.e., en mi caso lanjaron-bbox-jsamos-25830 o lanjaron-bbox-jsamos-23030), una capa para cada conjunto de hojas considerado, con la selección de las hojas que se corresponden con el rectángulo del municipio, cuyo nombre está compuesto por el nombre del municipio, “cuadricula” y el número que identifique el conjunto de hojas: 10, 100, 25 y 50 (p.e, en mi caso lanjaron-cuadricula-10, etc.). Estas capas no hay que incluirlas en el ejercicio 1, aunque también hay que conservarlas para utilizarlas en capítulos posteriores. Para documentar la realización del ejercicio, captura la imagen donde se muestre el municipio y el mínimo rectángulo que lo contiene (similar a la figura 4.1 para Lanjarón), y lista el número de las hojas del municipio para cada conjunto de hojas (p.e., para Lanjarón MTN25: 1026-4, 1027-3, 1041-2, 1041-4, 1042-1 y 1042-3). Ejercicio 4. Ortofotografía y MDT Para el municipio seleccionado obtén: una ortofotografía reciente y un MDT que abarquen todo el rectángulo del municipio (p.e., en mi caso, el definido en las capas lanjaron-bbox-jsamos-25830 o lanjaron-bbox-jsamos-23030), una capa de CartoCiudad que incluya al municipio, un mapa de uso/ocupación del suelo de CORINE Land Cover, en formato GeoPackage, Este ejercicio se documenta con la realización del ejercicio 1. Ejercicio 5. Bandas de Satélite Para la zona del municipio seleccionado, obtén bandas de satélite de fecha reciente y con escasa nubosidad para: Sentinel-2 o Landsat 8. Este ejercicio se documenta con la realización del ejercicio 1. Capas resultado de los ejercicios Las capas siguientes deberán estar disponibles para desarrollar las actividades del resto de capítulos. Un archivo en formato GeoPackage con: término municipal, mínimo rectángulo que contiene al término municipal, una capa compuesta por líneas sobre vías de comunicación, una capa compuesta por líneas sobre red hidrográfica, archivos de ortofotografía reciente que abarque todo el rectángulo del municipio, archivos de MDT que abarque todo el rectángulo del municipio, un archivo de CartoCiudad con las capas manzana y portal de la provincia, un archivo de CORINE Land Cover, en formato GeoPackage, bandas de satélite Sentinel-2 o Landsat 8 del municipio, actuales y sin nubes. "],["referencias.html", "Referencias", " Referencias "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
